#include <iostream>
#include <cctype>
#include "figure.h"
#include <vector>
#include <string.h>
#include <ncurses.h>
void clear_arr(std::vector<std::vector<char>> &m){
    for (int i = 59; i >= 0; --i)
    {
        for (int j = 0; j < 100; ++j)
        {
            if (j == 0 || j == 99 || i == 0 || i == 59) m[j][i] = '.';
            else m[j][i] = ' ';
        }
    }
    //H
    m[70][3] = '.';
    m[70][4] = '.';
    m[70][5] = '.';
    m[70][6] = '.';
    m[70][7] = '.';
    m[70][8] = '.';

    m[71][5] = '.';
    m[72][5] = '.';
    m[73][5] = '.';
    m[74][5] = '.';

    m[75][3] = '.';
    m[75][4] = '.';
    m[75][5] = '.';
    m[75][6] = '.';
    m[75][7] = '.';
    m[75][8] = '.';

    //O

    m[80][8] = '.';
    m[81][8] = '.';
    m[79][7] = '.';
    m[82][7] = '.';
    m[78][6] = '.';
    m[78][5] = '.';
    m[79][4] = '.';
    m[80][3] = '.';
    m[81][3] = '.';
    m[83][6] = '.';
    m[83][5] = '.';
    m[82][4] = '.';

    m[87][8] = '.';
    m[88][8] = '.';
    m[86][7] = '.';
    m[89][7] = '.';
    m[85][6] = '.';
    m[85][5] = '.';
    m[86][4] = '.';
    m[87][3] = '.';
    m[88][3] = '.';
    m[90][6] = '.';
    m[90][5] = '.';
    m[89][4] = '.';

    //N
    m[92][3] = '.';
    m[92][4] = '.';
    m[92][5] = '.';
    m[92][6] = '.';
    m[92][7] = '.';
    m[92][8] = '.';

    m[93][7] = '.';
    m[94][6] = '.';
    m[95][5] = '.';
    m[96][4] = '.';

    m[97][3] = '.';
    m[97][4] = '.';
    m[97][5] = '.';
    m[97][6] = '.';
    m[97][7] = '.';
    m[97][8] = '.';
}
void show(std::vector<std::vector<char>> &m){
        for (int i = 59; i >= 0; --i){
            for (int j = 0; j < 100; ++j){
                std::cout << m[j][i] << ' ';
            }
            std::cout << '\n';
        }
}

int main(){
    std::cout.tie(0), std::ios_base::sync_with_stdio(false);
    std::vector<std::vector<char>> m(100, std::vector<char>(60,' '));//Map
    Point x[8] = {//Center is (0, 0, 0)
        {-10, -8, -5},
        {10, -8, -5},
        {-10, 8, -5},
        {10, 8, -5},
        {-10, 8, 5},
        {10, 8, 5},
        {-10, -8, 5},
        {10, -8, 5},
    };
    while(1){
        for (Point &P : x){
            P.X_Rotate(10);
            P.Y_Rotate(10);
            P.Z_Rotate(10);
        }
        Line l[12] = {
            {x[0], x[1]},
            {x[0], x[2]},
            {x[1], x[3]},
            {x[2], x[3]},
            {x[2], x[4]},
            {x[3], x[5]},
            {x[4], x[5]},
            {x[6], x[4]},
            {x[7], x[5]},
            {x[0], x[6]},
            {x[1], x[7]},
            {x[6], x[7]},
        };
        for(Line &L:l){
            L.Draw(m);
        }
        show(m);
        clear_arr(m);
        napms(90);
    }
}